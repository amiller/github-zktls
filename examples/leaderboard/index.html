<!DOCTYPE html>
<html>
<head>
  <title>Proof Leaderboard</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    * { box-sizing: border-box; }
    body { font-family: system-ui, sans-serif; max-width: 900px; margin: 0 auto; padding: 20px; background: #0d1117; color: #c9d1d9; }
    h1 { color: #58a6ff; margin-bottom: 10px; }
    .subtitle { color: #8b949e; margin-bottom: 30px; }
    .proof { background: #161b22; border: 1px solid #30363d; border-radius: 8px; padding: 16px; margin-bottom: 12px; }
    .proof-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; }
    .proof-type { background: #238636; color: #fff; padding: 4px 10px; border-radius: 20px; font-size: 13px; font-weight: 500; }
    .proof-claim { font-size: 18px; font-weight: 600; color: #f0f6fc; }
    .proof-meta { font-size: 13px; color: #8b949e; }
    .proof-meta a { color: #58a6ff; text-decoration: none; }
    .proof-meta a:hover { text-decoration: underline; }
    .empty { text-align: center; padding: 60px; color: #8b949e; }
    .stats { display: flex; gap: 20px; margin-bottom: 30px; }
    .stat { background: #161b22; border: 1px solid #30363d; border-radius: 8px; padding: 16px 24px; }
    .stat-value { font-size: 32px; font-weight: 700; color: #58a6ff; }
    .stat-label { font-size: 13px; color: #8b949e; }
  </style>
</head>
<body>
  <h1>Proof Leaderboard</h1>
  <p class="subtitle">Verified proofs submitted via GitHub Actions</p>

  <div class="stats" id="stats"></div>
  <div id="proofs"></div>

  <script>
    async function load() {
      const res = await fetch('proofs.json')
      const proofs = await res.json()

      if (proofs.length === 0) {
        document.getElementById('proofs').innerHTML = '<div class="empty">No proofs submitted yet. Be the first!</div>'
        return
      }

      const types = [...new Set(proofs.map(p => p.proof_type))]
      document.getElementById('stats').innerHTML = `
        <div class="stat"><div class="stat-value">${proofs.length}</div><div class="stat-label">Total Proofs</div></div>
        <div class="stat"><div class="stat-value">${types.length}</div><div class="stat-label">Proof Types</div></div>
      `

      const sorted = proofs.slice().reverse()
      document.getElementById('proofs').innerHTML = sorted.map(p => `
        <div class="proof">
          <div class="proof-header">
            <span class="proof-type">${p.proof_type}</span>
            <span class="proof-claim">${p.claim}</span>
          </div>
          <div class="proof-meta">
            Submitted by <a href="https://github.com/${p.submitted_by}">${p.submitted_by}</a>
            &middot; <a href="${p.run_url}">View proof run</a>
            &middot; ${new Date(p.submitted_at).toLocaleDateString()}
          </div>
        </div>
      `).join('')
    }
    load()
  </script>
</body>
</html>
